import{d as w,u as b,r as c,c as C,a as e,b as s,w as d,e as a,o as k,f as v,g as V,S as m}from"./index-CB6Os2dO.js";const x={id:"loginPage",class:"bg-yellow"},y={class:"container loginPage vhContainer"},I=e("div",{class:"side"},[e("a",{href:"#"},[e("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),e("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),E=e("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),S=e("label",{class:"formControls_label",for:"email"},"Email",-1),F=e("label",{class:"formControls_label",for:"password"},"密碼",-1),L="https://todolist-api.hexschool.io",N={__name:"LogIn",setup(T){const u=w.useLoading({color:"#ffd370",backgroundColor:"white",opacity:.8,blur:"10px",zIndex:9999}),p=b(),t=c({email:"",password:""}),_=c(""),g=async()=>{const l=u.show({canCancel:!0});try{const o=await V.post(`${L}/users/sign_in`,t.value);console.log(o.data),document.cookie=`customTodoToken=${o.data.token};SameSite=None; Secure`,_.value=o.data.token,setTimeout(()=>{l.hide()},100),m.fire({position:"center",icon:"success",title:`${o.data.nickname}您已成功登入`,showConfirmButton:!1,timer:1500}),setTimeout(()=>{p.push("/todolist")},1e3)}catch(o){m.fire({icon:"error",title:o.response.data.message})}};return(l,o)=>{const r=a("VField"),i=a("ErrorMessage"),h=a("RouterLink"),f=a("VForm");return k(),C("div",x,[e("div",y,[I,e("div",null,[s(f,{class:"formControls"},{default:d(()=>[E,S,s(r,{id:"email",name:"email",type:"email",rules:"required|email",class:"formControls_input",placeholder:"請輸入 Email",modelValue:t.value.email,"onUpdate:modelValue":o[0]||(o[0]=n=>t.value.email=n)},null,8,["modelValue"]),s(i,{name:"email"}),F,s(r,{class:"formControls_input",type:"password",name:"密碼",rules:"required|min:6",id:"password",placeholder:"請輸入密碼",modelValue:t.value.password,"onUpdate:modelValue":o[1]||(o[1]=n=>t.value.password=n)},null,8,["modelValue"]),s(i,{name:"密碼"}),e("input",{class:"formControls_btnSubmit",type:"button",onClick:g,value:"登入"}),s(h,{to:"/",class:"formControls_btnLink"},{default:d(()=>[v("註冊帳號")]),_:1})]),_:1})])])])}}};export{N as default};
