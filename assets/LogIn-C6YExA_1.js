import{u as f,a as w,r as m,c as b,b as o,d as s,w as d,e as l,o as v,f as C,g as V,S as u}from"./index-i4dGkM8o.js";const k={id:"loginPage",class:"bg-yellow"},x={class:"container loginPage vhContainer"},y=o("div",{class:"side"},[o("a",{href:"#"},[o("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),o("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),I=o("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),R=o("label",{class:"formControls_label",for:"email"},"Email",-1),E=o("label",{class:"formControls_label",for:"password"},"密碼",-1),F="https://todolist-api.hexschool.io",T={__name:"LogIn",setup(B){f();const p=w(),t=m({email:"",password:""}),r=m(""),_=async()=>{console.log("signInRes:",r.value);try{const e=await V.post(`${F}/users/sign_in`,t.value);console.log(e.data),document.cookie=`customTodoToken=${e.data.token}`,r.value=e.data.token,u.fire({position:"center",icon:"success",title:`${e.data.nickname}您已成功登入`,showConfirmButton:!1,timer:1500}),setTimeout(()=>{p.push("/todolist")},1e3)}catch(e){console.log(e.response.data),u.fire({icon:"error",title:e.response.data.message})}};return(e,a)=>{const i=l("VField"),c=l("ErrorMessage"),g=l("RouterLink"),h=l("VForm");return v(),b("div",k,[o("div",x,[y,o("div",null,[s(h,{class:"formControls"},{default:d(()=>[I,R,s(i,{id:"email",name:"email",type:"email",rules:"required|email",class:"formControls_input",placeholder:"請輸入 Email",modelValue:t.value.email,"onUpdate:modelValue":a[0]||(a[0]=n=>t.value.email=n)},null,8,["modelValue"]),s(c,{name:"email"}),E,s(i,{class:"formControls_input",type:"password",name:"密碼",rules:"required|min:6",id:"password",placeholder:"請輸入密碼",modelValue:t.value.password,"onUpdate:modelValue":a[1]||(a[1]=n=>t.value.password=n)},null,8,["modelValue"]),s(c,{name:"密碼"}),o("input",{class:"formControls_btnSubmit",type:"button",onClick:_,value:"登入"}),s(g,{to:"/",class:"formControls_btnLink"},{default:d(()=>[C("註冊帳號")]),_:1})]),_:1})])])])}}};export{T as default};
